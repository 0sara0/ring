<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Declarative Programming using Nested Structures &mdash; Ring 1.13 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Ring 1.13 documentation" href="index.html" />
    <link rel="next" title="Natural Language Programming" href="natural.html" />
    <link rel="prev" title="Reflection and Meta-programming" href="metaprog.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Ring 1.13 documentation</span></a></h1>
        <h2 class="heading"><span>Declarative Programming using Nested Structures</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="metaprog.html">Reflection and Meta-programming</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="natural.html">Natural Language Programming</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="declarative-programming-using-nested-structures">
<span id="index-0"></span><h1>Declarative Programming using Nested Structures<a class="headerlink" href="#declarative-programming-using-nested-structures" title="Permalink to this headline">¶</a></h1>
<p>In this chapter we are going to learn how to build declarative programming world using nested structures on the top
of object oriented.</p>
<p>We will learn about</p>
<ul class="simple">
<li>Creating Objects inside Lists</li>
<li>Composition and Returning Objects and Lists by Reference</li>
<li>Executing code after the end of object access</li>
<li>Declarative Programming on the top of Object-Oriented</li>
</ul>
<div class="section" id="creating-objects-inside-lists">
<span id="index-1"></span><h2>Creating Objects inside Lists<a class="headerlink" href="#creating-objects-inside-lists" title="Permalink to this headline">¶</a></h2>
<p>We can create objects inside lists during list definition.
Also we can add objects to the list at any time using the Add() function or the + operator.</p>
<p>Example:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">alist</span> <span class="o">=</span> <span class="o">[</span><span class="k">new</span> <span class="n">point</span><span class="p">,</span> <span class="k">new</span> <span class="n">point</span><span class="p">,</span> <span class="k">new</span> <span class="n">point</span><span class="o">]</span>       <span class="c"># create list contains three objects</span>

<span class="n">alist</span> <span class="o">+</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span>                                 <span class="c"># add another item to the list</span>

<span class="k">see</span> <span class="s">&quot;Item 4 is a list contains 3 items&quot;</span> <span class="o">+</span> <span class="n">nl</span>
<span class="k">see</span> <span class="n">alist</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span>

<span class="n">add</span><span class="p">(</span><span class="n">alist</span> <span class="p">,</span> <span class="k">new</span> <span class="n">point</span><span class="p">)</span>
<span class="n">alist</span> <span class="o">+</span> <span class="k">new</span> <span class="n">point</span>

<span class="n">alist</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="p">{</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">200</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">300</span> <span class="p">}</span>
<span class="n">alist</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="p">{</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">50</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">150</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">250</span> <span class="p">}</span>

<span class="k">see</span> <span class="s">&quot;Object inside item 5&quot;</span> <span class="o">+</span> <span class="n">nl</span>
<span class="k">see</span> <span class="n">alist</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span>
<span class="k">see</span> <span class="s">&quot;Object inside item 6&quot;</span> <span class="o">+</span> <span class="n">nl</span>
<span class="k">see</span> <span class="n">alist</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span>

<span class="k">class</span> <span class="n">point</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">Item</span> <span class="mi">4</span> <span class="n">is</span> <span class="n">a</span> <span class="kt">list</span> <span class="n">contains</span> <span class="mi">3</span> <span class="n">items</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="n">Object</span> <span class="n">inside</span> <span class="n">item</span> <span class="mi">5</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">100.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">200.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">300.000000</span>
<span class="n">Object</span> <span class="n">inside</span> <span class="n">item</span> <span class="mi">6</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">50.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">150.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">250.000000</span>
</pre></div>
</div>
</div>
<div class="section" id="composition-and-returning-objects-and-lists-by-reference">
<span id="index-2"></span><h2>Composition and Returning Objects and Lists by Reference<a class="headerlink" href="#composition-and-returning-objects-and-lists-by-reference" title="Permalink to this headline">¶</a></h2>
<p>When we use composition and have object as one of the class attributes, when we return that object it will be returned by reference.</p>
<p>if the caller used the assignment operator, another copy of the object will be created.</p>
<p>The caller can avoid using the assignment operator and use the returned reference directly to access the object.</p>
<p>The same is done also if the attribute is a list (not object).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Objects and Lists are treated using the same rules. When you pass them to function they are passed by reference,
when you return them from functions they are returned by value except if it&#8217;s an object attribute where a return by reference
will be done.</p>
</div>
<p>Example:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">o1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Container</span>
<span class="n">myobj</span> <span class="o">=</span> <span class="n">o1</span><span class="p">.</span><span class="n">addobj</span><span class="p">()</span>     <span class="c"># the assignment will create another copy</span>
<span class="n">myobj</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">myobj</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">myobj</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">300</span>
<span class="k">see</span> <span class="n">o1</span><span class="p">.</span><span class="n">aobjs</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>         <span class="c"># print the object inside the container</span>
<span class="k">see</span> <span class="n">myobj</span>               <span class="c"># print the copy</span>

<span class="k">Class</span> <span class="n">Container</span>
        <span class="n">aObjs</span> <span class="o">=</span> <span class="o">[]</span>
        <span class="k">func</span> <span class="n">addobj</span>
                <span class="n">aobjs</span> <span class="o">+</span> <span class="k">new</span> <span class="n">point</span>
                <span class="k">return</span> <span class="n">aobjs</span><span class="o">[</span><span class="n">len</span><span class="p">(</span><span class="n">aobjs</span><span class="p">)</span><span class="o">]</span>        <span class="c"># return object by reference</span>

<span class="k">Class</span> <span class="n">point</span>
        <span class="n">x</span>  <span class="o">=</span> <span class="mi">10</span>
        <span class="n">y</span>  <span class="o">=</span> <span class="mi">20</span>
        <span class="n">z</span>  <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">:</span> <span class="mf">10.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">20.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">30.000000</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">100.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">200.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">300.000000</span>
</pre></div>
</div>
<p>Example(2):</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="k">func</span> <span class="n">main</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">screen</span>  <span class="p">{</span>
                <span class="n">content</span><span class="o">[</span><span class="n">point</span><span class="p">()</span><span class="o">]</span> <span class="p">{</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
                        <span class="n">z</span> <span class="o">=</span> <span class="mi">300</span>
                <span class="p">}</span>
                <span class="n">content</span><span class="o">[</span><span class="n">point</span><span class="p">()</span><span class="o">]</span> <span class="p">{</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="mi">50</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">150</span>
                        <span class="n">z</span> <span class="o">=</span> <span class="mi">250</span>
                <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">see</span> <span class="n">o1</span><span class="p">.</span><span class="n">content</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
        <span class="k">see</span> <span class="n">o1</span><span class="p">.</span><span class="n">content</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>

<span class="k">Class</span> <span class="n">Screen</span>
        <span class="n">content</span> <span class="o">=</span> <span class="o">[]</span>
        <span class="k">func</span> <span class="n">point</span>
                <span class="n">content</span> <span class="o">+</span> <span class="k">new</span> <span class="n">point</span>
                <span class="k">return</span> <span class="n">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="k">Class</span> <span class="n">point</span>
        <span class="n">x</span>  <span class="o">=</span> <span class="mi">10</span>
        <span class="n">y</span>  <span class="o">=</span> <span class="mi">20</span>
        <span class="n">z</span>  <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">:</span> <span class="mf">100.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">200.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">300.000000</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">50.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">150.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">250.000000</span>
</pre></div>
</div>
<p>Example(3):</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="k">func</span> <span class="n">main</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="k">New</span> <span class="n">Screen</span>  <span class="p">{</span>
                <span class="n">point</span><span class="p">()</span> <span class="p">{</span>               <span class="c"># access the object using reference</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
                        <span class="n">z</span> <span class="o">=</span> <span class="mi">300</span>
                <span class="p">}</span>
                <span class="n">point</span><span class="p">()</span> <span class="p">{</span>               <span class="c"># access the object using reference</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="mi">50</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">150</span>
                        <span class="n">z</span> <span class="o">=</span> <span class="mi">250</span>
                <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">see</span> <span class="n">o1</span><span class="p">.</span><span class="n">content</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
        <span class="k">see</span> <span class="n">o1</span><span class="p">.</span><span class="n">content</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>

<span class="k">Class</span> <span class="n">Screen</span>
        <span class="n">content</span> <span class="o">=</span> <span class="o">[]</span>
        <span class="k">func</span> <span class="n">point</span>
                <span class="n">content</span> <span class="o">+</span> <span class="k">new</span> <span class="n">point</span>
                <span class="k">return</span> <span class="n">content</span><span class="o">[</span><span class="n">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="o">]</span>    <span class="c"># return the object by reference</span>

<span class="k">Class</span> <span class="n">point</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span> <span class="n">y</span><span class="o">=</span><span class="mi">20</span> <span class="n">z</span><span class="o">=</span><span class="mi">30</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">:</span> <span class="mf">100.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">200.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">300.000000</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">50.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">150.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">250.000000</span>
</pre></div>
</div>
</div>
<div class="section" id="executing-code-after-the-end-of-object-access">
<span id="index-3"></span><h2>Executing code after the end of object access<a class="headerlink" href="#executing-code-after-the-end-of-object-access" title="Permalink to this headline">¶</a></h2>
<p>We can access an object using { } to use object attributes and methods.</p>
<p>if the object contains a method called BraceEnd(), it will be executed before the end of the object access.</p>
<p>Example:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="k">New</span> <span class="n">Point</span> <span class="p">{</span> <span class="k">See</span> <span class="s">&quot;How are you?&quot;</span> <span class="o">+</span> <span class="n">nl</span> <span class="p">}</span>

<span class="k">Class</span> <span class="n">Point</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
        <span class="k">func</span> <span class="n">braceend</span>
                <span class="k">see</span> <span class="s">&quot;I&#39;m fine, Thank you!&quot;</span> <span class="o">+</span> <span class="n">nl</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">How</span> <span class="n">are</span> <span class="n">you</span><span class="o">?</span>
<span class="n">I</span><span class="sc">&#39;m fine, Thank you!</span>
</pre></div>
</div>
</div>
<div class="section" id="declarative-programming-on-the-top-of-object-oriented">
<span id="index-4"></span><h2>Declarative Programming on the top of Object-Oriented<a class="headerlink" href="#declarative-programming-on-the-top-of-object-oriented" title="Permalink to this headline">¶</a></h2>
<p>The next features enable us to build and use declartive programming environment using nested structures on the top of object oriented</p>
<ul class="simple">
<li>using {} to access the object attributes and methods</li>
<li>BraceEnd() Method</li>
<li>returning objects by reference</li>
<li>Setter/Getter Methods (optional)</li>
</ul>
<p>Example:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="c"># Declartive Programming (Nested Structures)</span>

<span class="n">Screen</span><span class="p">()</span>
<span class="p">{</span>

        <span class="n">point</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
                <span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
                <span class="n">z</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="p">}</span>

        <span class="n">point</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mi">50</span>
                <span class="n">y</span> <span class="o">=</span> <span class="mi">150</span>
                <span class="n">z</span> <span class="o">=</span> <span class="mi">250</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="c"># Functions and Classes</span>

<span class="k">Func</span> <span class="n">screen</span> <span class="k">return</span> <span class="k">new</span> <span class="n">screen</span>

<span class="k">Class</span> <span class="n">Screen</span>

        <span class="n">content</span> <span class="o">=</span> <span class="o">[]</span>

        <span class="k">func</span> <span class="n">point</span>
                <span class="n">content</span> <span class="o">+</span> <span class="k">new</span> <span class="n">point</span>
                <span class="k">return</span> <span class="n">content</span><span class="o">[</span><span class="n">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="o">]</span>

        <span class="k">func</span> <span class="n">braceend</span>
                <span class="k">see</span> <span class="s">&quot;I have &quot;</span> <span class="o">+</span> <span class="n">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; points!&quot;</span>

<span class="k">Class</span> <span class="n">point</span>

        <span class="n">x</span><span class="o">=</span><span class="mi">10</span> <span class="n">y</span><span class="o">=</span><span class="mi">20</span> <span class="n">z</span><span class="o">=</span><span class="mi">30</span>

        <span class="k">func</span> <span class="n">braceend</span>
                <span class="k">see</span> <span class="n">self</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">:</span> <span class="mf">100.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">200.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">300.000000</span>
<span class="n">x</span><span class="p">:</span> <span class="mf">50.000000</span>
<span class="n">y</span><span class="p">:</span> <span class="mf">150.000000</span>
<span class="n">z</span><span class="p">:</span> <span class="mf">250.000000</span>
<span class="n">I</span> <span class="n">have</span> <span class="mi">2</span> <span class="n">points</span><span class="o">!</span>
</pre></div>
</div>
</div>
<div class="section" id="more-beautiful-code">
<span id="index-5"></span><h2>More beautiful Code<a class="headerlink" href="#more-beautiful-code" title="Permalink to this headline">¶</a></h2>
<p>We can get better results and a more beautiful code when we can avoid writing () after the method name
when the methods doesn&#8217;t take parameters.
This feature is not provided directly by the Ring language because there is a difference between object methods
and object attributes. We can get a similar effect on the syntax of the code when we define a getter method for
the object attribute. For example instead of defining the point() method. we will define the point attribute then
the getpoint() method that will be executed once you try to get the value of the point attribute.
since we write the variable name direcly without () we can write point instead of point() and the method getpoint()
will create the object and return the object reference for us.</p>
<p>Example:</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="n">Container</span>
<span class="p">{</span>
        <span class="n">Point</span>
        <span class="p">{</span>
                <span class="n">x</span><span class="o">=</span><span class="mi">10</span>
                <span class="n">y</span><span class="o">=</span><span class="mi">20</span>
                <span class="n">z</span><span class="o">=</span><span class="mi">30</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="k">Class</span> <span class="n">Container</span>
        <span class="n">aObjs</span> <span class="o">=</span> <span class="o">[]</span>
        <span class="n">point</span>
        <span class="k">func</span> <span class="n">getpoint</span>
                <span class="n">aObjs</span> <span class="o">+</span> <span class="k">new</span> <span class="n">Point</span>
                <span class="k">return</span> <span class="n">aObjs</span><span class="o">[</span><span class="n">len</span><span class="p">(</span><span class="n">aObjs</span><span class="p">)</span><span class="o">]</span>

<span class="k">Class</span> <span class="n">Point</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
        <span class="k">func</span> <span class="n">braceend</span>
                <span class="k">see</span> <span class="s">&quot;3D Point&quot;</span> <span class="o">+</span> <span class="n">nl</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="n">nl</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">nl</span> <span class="o">+</span> <span class="n">z</span> <span class="o">+</span> <span class="n">nl</span>
</pre></div>
</div>
<p>Output</p>
<div class="highlight-ring"><div class="highlight"><pre><span></span>3D Point
10
20
30
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="metaprog.html">Reflection and Meta-programming</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="natural.html">Natural Language Programming</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016-2020, Ring Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>